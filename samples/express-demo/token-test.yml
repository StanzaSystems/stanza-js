config:
  target: "https://hub.dev.getstanza.dev:9010"
  processor: './load-test-utils.js'
  phases:
    - duration: 20
      arrivalRate: 8
scenarios:
  # - name: "Send pro requests"
  #   afterResponse: "trackRateLimits"
  #   flow:
  #     - get:
  #         url: "/account/maggiepint"
  #   weight: 1
  - name: "Send free requests"
    afterResponse: "trackRateLimitsFromHub"
    flow:
      - post:
          url: '/v1/quota/token'
          headers:
            X-Stanza-Key: 'valid-api-key'
            x-user-plan: "free"
          json:
            priorityBoost: -1
            selector:
              environment: local
              decoratorName: github_guard
    weight: 1
  - name: "Send enterprise requests"
    afterResponse: "trackRateLimitsFromHub"
    flow:
      - post:
          url: '/v1/quota/token'
          headers:
            X-Stanza-Key: 'valid-api-key'
            x-user-plan: "enterprise"
          json:
            priorityBoost: 0
            selector:
              environment: local
              decoratorName: github_guard
    weight: 1

